#!/bin/sh
process_id="$(xprop -root  _NET_ACTIVE_WINDOW | awk '{print $5}')"
# Add 1 to discover pid of current window's child(shell)
process_pid="$(( $(xprop -id "$process_id" _NET_WM_PID | cut -d " " -f 3) + 1 ))"
if [ -e "/proc/"$process_pid"/cwd" ];then
 cd $(readlink /proc/"$process_pid"/cwd)
 "$TERMINAL"
else
  "$TERMINAL"
fi
